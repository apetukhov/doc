<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class PhysicalReplicationConnection | Npgsql Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class PhysicalReplicationConnection | Npgsql Documentation ">
      
      <meta name="description" content="Represents a physical replication connection to a PostgreSQL server.">
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/npgsql/Npgsql/new/stable/apiSpec/new?filename=Npgsql_Replication_PhysicalReplicationConnection.md&amp;value=---%0Auid%3A%20Npgsql.Replication.PhysicalReplicationConnection%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../img/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Npgsql.Replication.PhysicalReplicationConnection">



  <h1 id="Npgsql_Replication_PhysicalReplicationConnection" data-uid="Npgsql.Replication.PhysicalReplicationConnection" class="text-break">
Class PhysicalReplicationConnection  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L15"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Npgsql.html">Npgsql</a>.<a class="xref" href="Npgsql.Replication.html">Replication</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Npgsql.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Represents a physical replication connection to a PostgreSQL server.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class PhysicalReplicationConnection : ReplicationConnection, IAsyncDisposable</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="Npgsql.Replication.ReplicationConnection.html">ReplicationConnection</a></div>
      <div><span class="xref">PhysicalReplicationConnection</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iasyncdisposable">IAsyncDisposable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_ConnectionString">ReplicationConnection.ConnectionString</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_LastReceivedLsn">ReplicationConnection.LastReceivedLsn</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_LastFlushedLsn">ReplicationConnection.LastFlushedLsn</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_LastAppliedLsn">ReplicationConnection.LastAppliedLsn</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_WalReceiverStatusInterval">ReplicationConnection.WalReceiverStatusInterval</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_WalReceiverTimeout">ReplicationConnection.WalReceiverTimeout</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_PostgreSqlVersion">ReplicationConnection.PostgreSqlVersion</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_ServerVersion">ReplicationConnection.ServerVersion</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_CommandTimeout">ReplicationConnection.CommandTimeout</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_Encoding">ReplicationConnection.Encoding</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_ProcessID">ReplicationConnection.ProcessID</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_Open_System_Threading_CancellationToken_">ReplicationConnection.Open(CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_DisposeAsync">ReplicationConnection.DisposeAsync()</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_IdentifySystem_System_Threading_CancellationToken_">ReplicationConnection.IdentifySystem(CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_Show_System_String_System_Threading_CancellationToken_">ReplicationConnection.Show(string, CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_TimelineHistory_System_UInt32_System_Threading_CancellationToken_">ReplicationConnection.TimelineHistory(uint, CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_SetReplicationStatus_NpgsqlTypes_NpgsqlLogSequenceNumber_">ReplicationConnection.SetReplicationStatus(NpgsqlLogSequenceNumber)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_SendStatusUpdate_System_Threading_CancellationToken_">ReplicationConnection.SendStatusUpdate(CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="Npgsql.Replication.ReplicationConnection.html#Npgsql_Replication_ReplicationConnection_DropReplicationSlot_System_String_System_Boolean_System_Threading_CancellationToken_">ReplicationConnection.DropReplicationSlot(string, bool, CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="Npgsql_Replication_PhysicalReplicationConnection__ctor_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.#ctor*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection__ctor" data-uid="Npgsql.Replication.PhysicalReplicationConnection.#ctor">
  PhysicalReplicationConnection()
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L22"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of <a class="xref" href="Npgsql.Replication.PhysicalReplicationConnection.html">PhysicalReplicationConnection</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public PhysicalReplicationConnection()</code></pre>
  </div>













  <a id="Npgsql_Replication_PhysicalReplicationConnection__ctor_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.#ctor*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection__ctor_System_String_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.#ctor(System.String)">
  PhysicalReplicationConnection(string?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L28"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of <a class="xref" href="Npgsql.Replication.PhysicalReplicationConnection.html">PhysicalReplicationConnection</a> with the given connection string.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public PhysicalReplicationConnection(string? connectionString)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>connectionString</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The connection used to open the PostgreSQL database.</p>
</dd>
  </dl>












  <h2 class="section" id="methods">Methods
</h2>


  <a id="Npgsql_Replication_PhysicalReplicationConnection_CreateReplicationSlot_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.CreateReplicationSlot*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection_CreateReplicationSlot_System_String_System_Boolean_System_Boolean_System_Threading_CancellationToken_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.CreateReplicationSlot(System.String,System.Boolean,System.Boolean,System.Threading.CancellationToken)">
  CreateReplicationSlot(string, bool, bool, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L53"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Creates a <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a> that wraps a PostgreSQL physical replication slot and
can be used to start physical streaming replication</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task&lt;PhysicalReplicationSlot&gt; CreateReplicationSlot(string slotName, bool isTemporary = false, bool reserveWal = false, CancellationToken cancellationToken = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>slotName</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The name of the slot to create. Must be a valid replication slot name
(see <a href="https://www.postgresql.org/docs/current/warm-standby.html#STREAMING-REPLICATION-SLOTS-MANIPULATION">Section 26.2.6.1</a>).</p>
</dd>
    <dt><code>isTemporary</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p><a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">true</a> if this replication slot shall be a temporary one; otherwise
<a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">false</a>. Temporary slots are not saved to disk and are automatically dropped on error or
when the session has finished.</p>
</dd>
    <dt><code>reserveWal</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>If this is set to <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">true</a> this physical replication slot reserves WAL immediately. Otherwise,
WAL is only reserved upon connection from a streaming replication client.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>An optional token to cancel the asynchronous operation. The default value is <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken.none">None</a>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a>&gt;</dt>
    <dd><p>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task&lt;TResult&gt;</a> representing a <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a> that represents the
newly-created replication slot.</p>
</dd>
  </dl>











  <a id="Npgsql_Replication_PhysicalReplicationConnection_ReadReplicationSlot_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.ReadReplicationSlot*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection_ReadReplicationSlot_System_String_System_Threading_CancellationToken_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.ReadReplicationSlot(System.String,System.Threading.CancellationToken)">
  ReadReplicationSlot(string, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L88"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Read some information associated to a replication slot.
<remarks>
This command is currently only supported for physical replication slots.
</remarks></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task&lt;PhysicalReplicationSlot?&gt; ReadReplicationSlot(string slotName, CancellationToken cancellationToken = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>slotName</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The name of the slot to read. Must be a valid replication slot name</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>An optional token to cancel the asynchronous operation. The default value is <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken.none">None</a>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a>&gt;</dt>
    <dd><p>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task&lt;TResult&gt;</a> representing a <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a> or <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>
if the replication slot does not exist.</p>
</dd>
  </dl>











  <a id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_Npgsql_Replication_PhysicalReplicationSlot_NpgsqlTypes_NpgsqlLogSequenceNumber_System_Threading_CancellationToken_System_UInt32_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication(Npgsql.Replication.PhysicalReplicationSlot,NpgsqlTypes.NpgsqlLogSequenceNumber,System.Threading.CancellationToken,System.UInt32)">
  StartReplication(PhysicalReplicationSlot?, NpgsqlLogSequenceNumber, CancellationToken, uint)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L110"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Instructs the server to start streaming the WAL for physical replication, starting at WAL location
<code class="paramref">walLocation</code>. The server can reply with an error, for example if the requested
section of the WAL has already been recycled.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IAsyncEnumerable&lt;XLogDataMessage&gt; StartReplication(PhysicalReplicationSlot? slot, NpgsqlLogSequenceNumber walLocation, CancellationToken cancellationToken, uint timeline = 0)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>slot</code> <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a></dt>
    <dd><p>The replication slot that will be updated as replication progresses so that the server
knows which WAL segments are still needed by the standby.</p>
</dd>
    <dt><code>walLocation</code> <a class="xref" href="NpgsqlTypes.NpgsqlLogSequenceNumber.html">NpgsqlLogSequenceNumber</a></dt>
    <dd><p>The WAL location to begin streaming at.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>The token to be used for stopping the replication.</p>
</dd>
    <dt><code>timeline</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.uint32">uint</a></dt>
    <dd><p>Streaming starts on timeline tli.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable</a>&lt;<a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a>&gt;</dt>
    <dd><p>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task&lt;TResult&gt;</a> representing an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable&lt;T&gt;</a> that
can be used to stream WAL entries in form of <a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a> instances.</p>
</dd>
  </dl>







  <h4 class="section" id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_Npgsql_Replication_PhysicalReplicationSlot_NpgsqlTypes_NpgsqlLogSequenceNumber_System_Threading_CancellationToken_System_UInt32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If the client requests a timeline that's not the latest but is part of the history of the server, the server
will stream all the WAL on that timeline starting from the requested start point up to the point where the
server switched to another timeline.</p>
</div>




  <a id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_Npgsql_Replication_PhysicalReplicationSlot_System_Threading_CancellationToken_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication(Npgsql.Replication.PhysicalReplicationSlot,System.Threading.CancellationToken)">
  StartReplication(PhysicalReplicationSlot, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L179"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Instructs the server to start streaming the WAL for physical replication, starting at the WAL location
and timeline id specified in <code class="paramref">slot</code>. The server can reply with an error, for example
if the requested section of the WAL has already been recycled.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IAsyncEnumerable&lt;XLogDataMessage&gt; StartReplication(PhysicalReplicationSlot slot, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>slot</code> <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html">PhysicalReplicationSlot</a></dt>
    <dd><p>The replication slot that will be updated as replication progresses so that the server
knows which WAL segments are still needed by the standby.
<remarks>
The <code class="paramref">slot</code> must contain a valid <a class="xref" href="Npgsql.Replication.PhysicalReplicationSlot.html#Npgsql_Replication_PhysicalReplicationSlot_RestartLsn">RestartLsn</a> to be used for this overload.
</remarks></p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>The token to be used for stopping the replication.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable</a>&lt;<a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a>&gt;</dt>
    <dd><p>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task&lt;TResult&gt;</a> representing an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable&lt;T&gt;</a> that
can be used to stream WAL entries in form of <a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a> instances.</p>
</dd>
  </dl>







  <h4 class="section" id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_Npgsql_Replication_PhysicalReplicationSlot_System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If the client requests a timeline that's not the latest but is part of the history of the server, the server
will stream all the WAL on that timeline starting from the requested start point up to the point where the
server switched to another timeline.</p>
</div>




  <a id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication*"></a>

  <h3 id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_NpgsqlTypes_NpgsqlLogSequenceNumber_System_Threading_CancellationToken_System_UInt32_" data-uid="Npgsql.Replication.PhysicalReplicationConnection.StartReplication(NpgsqlTypes.NpgsqlLogSequenceNumber,System.Threading.CancellationToken,System.UInt32)">
  StartReplication(NpgsqlLogSequenceNumber, CancellationToken, uint)
  <a class="header-action link-secondary" title="View source" href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L155"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Instructs the server to start streaming the WAL for logical replication, starting at WAL location
<code class="paramref">walLocation</code>. The server can reply with an error, for example if the requested
section of WAL has already been recycled.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IAsyncEnumerable&lt;XLogDataMessage&gt; StartReplication(NpgsqlLogSequenceNumber walLocation, CancellationToken cancellationToken, uint timeline = 0)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>walLocation</code> <a class="xref" href="NpgsqlTypes.NpgsqlLogSequenceNumber.html">NpgsqlLogSequenceNumber</a></dt>
    <dd><p>The WAL location to begin streaming at.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>The token to be used for stopping the replication.</p>
</dd>
    <dt><code>timeline</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.uint32">uint</a></dt>
    <dd><p>Streaming starts on timeline tli.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable</a>&lt;<a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a>&gt;</dt>
    <dd><p>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task&lt;TResult&gt;</a> representing an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable&lt;T&gt;</a> that
can be used to stream WAL entries in form of <a class="xref" href="Npgsql.Replication.XLogDataMessage.html">XLogDataMessage</a> instances.</p>
</dd>
  </dl>







  <h4 class="section" id="Npgsql_Replication_PhysicalReplicationConnection_StartReplication_NpgsqlTypes_NpgsqlLogSequenceNumber_System_Threading_CancellationToken_System_UInt32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If the client requests a timeline that's not the latest but is part of the history of the server, the server
will stream all the WAL on that timeline starting from the requested start point up to the point where the
server switched to another timeline.</p>
</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/npgsql/npgsql/blob/main/src/Npgsql/Replication/PhysicalReplicationConnection.cs/#L15" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © Copyright 2024 The Npgsql Development Team
        </div>
      </div>
    </footer>
  </body>
</html>
