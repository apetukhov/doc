<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Array Type Mapping | Npgsql Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Array Type Mapping | Npgsql Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/npgsql/doc/blob/main/conceptual/EFCore.PG/mapping/array.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="array-type-mapping">Array Type Mapping</h1>

<p>PostgreSQL has the unique feature of supporting <a href="https://www.postgresql.org/docs/current/static/arrays.html"><em>array data types</em></a>. This allow you to conveniently and efficiently store several values in a single column, where in other database you'd typically resort to concatenating the values in a string or defining another table with a one-to-many relationship.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Although PostgreSQL supports multidimensional arrays, these aren't yet supported by the EF Core provider.</p>
</div>
<h2 id="mapping-arrays">Mapping arrays</h2>
<p>Simply define a regular .NET array or <code>List&lt;&gt;</code> property:</p>
<pre><code class="lang-c#">public class Post
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string[] Tags { get; set; }
    public List&lt;string&gt; AlternativeTags { get; set; }
}
</code></pre>
<p>The provider will create <code>text[]</code> columns for the above two properties, and will properly detect changes in them - if you load an array and change one of its elements, calling <code>SaveChanges</code> will automatically update the row in the database accordingly.</p>
<h2 id="operation-translation">Operation translation</h2>
<p>The provider can also translate CLR array operations to the corresponding SQL operation; this allows you to efficiently work with arrays by evaluating operations in the database and avoids pulling all the data. The following table lists the range operations that currently get translated; all these translations work both for .NET arrays (<code>int[]</code>) and for generic Lists (<code>List&lt;int&gt;</code>). If you run into a missing operation, please open an issue.</p>
<table>
<thead>
<tr>
<th>.NET</th>
<th>SQL</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>array[0]</td>
<td><a href="https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING">array[1]</a></td>
<td></td>
</tr>
<tr>
<td>array.Length / list.Count</td>
<td><a href="https://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE">cardinality(array)</a></td>
<td></td>
</tr>
<tr>
<td>array.Skip(2)</td>
<td><a href="https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING">array[3,]</a></td>
<td>Added in 8.0</td>
</tr>
<tr>
<td>array.Take(2)</td>
<td><a href="https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING">array[,2]</a></td>
<td>Added in 8.0</td>
</tr>
<tr>
<td>array.Skip(1).Take(2)</td>
<td><a href="https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING">array[2,3]</a></td>
<td>Added in 8.0</td>
</tr>
<tr>
<td>array1 == array2</td>
<td><a href="https://www.postgresql.org/docs/current/static/arrays.html">array1 = array2</a></td>
<td></td>
</tr>
<tr>
<td>array1.SequenceEqual(array2)</td>
<td><a href="https://www.postgresql.org/docs/current/static/arrays.html">array1 = array2</a></td>
<td></td>
</tr>
<tr>
<td>arrayNonColumn.Contains(element)</td>
<td><a href="https://www.postgresql.org/docs/current/static/functions-comparisons.html#AEN21104">element = ANY(arrayNonColumn)</a></td>
<td>Can use regular index</td>
</tr>
<tr>
<td>arrayColumn.Contains(element)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-OPERATORS-TABLE">arrayColumn @&gt; ARRAY[element]</a></td>
<td>Can use GIN index</td>
</tr>
<tr>
<td>array.Append(element)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE">array_append(array, element)</a></td>
<td>Added in 6.0</td>
</tr>
<tr>
<td>array1.Concat(array2)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE">array1 || array2</a></td>
<td>Added in 6.0</td>
</tr>
<tr>
<td>array.IndexOf(element)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE">array_position(array, element) - 1</a></td>
<td>Added in 6.0</td>
</tr>
<tr>
<td>array.IndexOf(element, startIndex)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE">array_position(array, element, startIndex + 1) - 1</a></td>
<td>Added in 6.0</td>
</tr>
<tr>
<td>String.Join(separator, array)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE">array_to_string(array, separator, '')</a></td>
<td>Added in 6.0</td>
</tr>
<tr>
<td>array.Any()</td>
<td><a href="https://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE">cardinality(array) &gt; 0</a></td>
<td></td>
</tr>
<tr>
<td>array1.Intersect(array2).Any()</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-OPERATORS-TABLE">array1 &amp;&amp; array2</a></td>
<td>Added in 8.0</td>
</tr>
<tr>
<td>array1.Any(i =&gt; array2.Contains(i))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-OPERATORS-TABLE">array1 &amp;&amp; array2</a></td>
<td></td>
</tr>
<tr>
<td>array1.All(i =&gt; array2.Contains(i))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-array.html#ARRAY-OPERATORS-TABLE">array1 &lt;@ array2</a></td>
<td></td>
</tr>
<tr>
<td>array.Any(s =&gt; EF.Functions.Like(string, s))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.30.16">string LIKE ANY (array)</a></td>
<td></td>
</tr>
<tr>
<td>array.Any(s =&gt; EF.Functions.ILike(string, s))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.30.16">string ILIKE ANY (array)</a></td>
<td></td>
</tr>
<tr>
<td>array.All(s =&gt; EF.Functions.Like(string, s))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.30.16">string LIKE ALL (array)</a></td>
<td></td>
</tr>
<tr>
<td>array.All(s =&gt; EF.Functions.ILike(string, s))</td>
<td><a href="https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.30.16">string ILIKE ALL (array)</a></td>
<td></td>
</tr>
<tr>
<td>EF.Functions.ArrayAgg(values)</td>
<td><a href="https://www.postgresql.org/docs/current/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE">array_agg(values)</a></td>
<td>Added in 7.0, See <a href="translations.html#aggregate-functions">Aggregate functions</a>.</td>
</tr>
</tbody>
</table>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/npgsql/doc/blob/main/conceptual/EFCore.PG/mapping/array.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © Copyright 2024 The Npgsql Development Team
        </div>
      </div>
    </footer>
  </body>
</html>
